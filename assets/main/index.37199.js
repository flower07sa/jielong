window.__require=function t(e,o,n){function r(c,s){if(!o[c]){if(!e[c]){var i=c.split("/");if(i=i[i.length-1],!e[i]){var d="function"==typeof __require&&__require;if(!s&&d)return d(i,!0);if(a)return a(i,!0);throw new Error("Cannot find module '"+c+"'")}c=i}var u=o[c]={exports:{}};e[c][0].call(u.exports,function(t){return r(e[c][1][t]||t)},u,u.exports,t,e,o,n)}return o[c].exports}for(var a="function"==typeof __require&&__require,c=0;c<n.length;c++)r(n[c]);return r}({AudioManager:[function(t,e,o){"use strict";cc._RF.push(e,"c8fa6frbHdI3KXcOk8YNx/K","AudioManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("Storge"),r=function(){function t(){}return Object.defineProperty(t,"soundOpen",{get:function(){return 0!=cc.audioEngine.getEffectsVolume()},set:function(t){t?cc.audioEngine.setEffectsVolume(1):cc.audioEngine.setEffectsVolume(0),n.default.SOUND.set(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"musicOpen",{get:function(){return 0!=cc.audioEngine.getMusicVolume()},set:function(t){t?cc.audioEngine.setMusicVolume(1):cc.audioEngine.setMusicVolume(0),n.default.MUSIC.set(t)},enumerable:!1,configurable:!0}),t.playMusic=function(t,e){void 0===e&&(e=!1),this.currentBGM!=t&&(this.currentBGM=t,n.default.MUSIC.get()&&cc.resources.load(t,cc.AudioClip,function(t,o){t?cc.error(t):cc.audioEngine.playMusic(o,e)}))},t.playSound=function(t,e){void 0===e&&(e=!1),n.default.SOUND.get()&&cc.resources.load(t,cc.AudioClip,function(t,o){t?cc.error(t):cc.audioEngine.playEffect(o,e)})},t}();o.default=r,cc._RF.pop()},{Storge:"Storge"}],CardFactoryBase:[function(t,e,o){"use strict";cc._RF.push(e,"ddd53C6Im9L9JjBXPNTFQzb","CardFactoryBase"),Object.defineProperty(o,"__esModule",{value:!0}),o.JokerValue=void 0,o.JokerValue=1e3,cc._RF.pop()},{}],CardFactory:[function(t,e,o){"use strict";cc._RF.push(e,"7de39q9VHtHv5PZQjuhggNg","CardFactory"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("CardFactoryBase"),r=cc._decorator,a=r.ccclass,c=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.jokercard=null,e.background=null,e.backgroundRandom=null,e.valueRandom=null,e.cardTemplate=null,e.cardSprite=[],e}var o;return __extends(e,t),o=e,e.prototype.start=function(){o.instance=this,this.cardTemplate.active=!1},e.prototype.getSpriteFrame=function(t,e){return t==n.JokerValue?this.jokercard:(t+=13*e,this.cardSprite[t-1])},e.make=function(){var t=cc.instantiate(o.instance.cardTemplate);return t.active=!0,t.getComponent("Card")},e.makeEditor=function(t){var e=o.instance.cardTemplate.getComponent("Card");return e.value=t.value,e.depth=t.depth,e.faceUp=t.faceUp,o.make()},e.instance=null,__decorate([c(cc.SpriteFrame)],e.prototype,"jokercard",void 0),__decorate([c(cc.SpriteFrame)],e.prototype,"background",void 0),__decorate([c(cc.SpriteFrame)],e.prototype,"backgroundRandom",void 0),__decorate([c(cc.SpriteFrame)],e.prototype,"valueRandom",void 0),__decorate([c(cc.Node)],e.prototype,"cardTemplate",void 0),__decorate([c(cc.SpriteFrame)],e.prototype,"cardSprite",void 0),o=__decorate([a],e)}(cc.Component);o.default=s,cc._RF.pop()},{CardFactoryBase:"CardFactoryBase"}],Card:[function(t,e,o){"use strict";cc._RF.push(e,"cfcebnWcUdMX6K+A16zA8dG","Card"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("Util"),r=t("CardFactory"),a=t("CardFactoryBase");function c(t,e,o,n){return t*n-e*o}function s(t,e,o,n,r,a,s,i,d,u){var l=c(o-t,n-e,r-t,a-e),p=c(r-t,a-e,s-t,i-e),h=c(s-t,i-e,d-t,u-e),f=c(d-t,u-e,o-t,n-e);return l<=0&&p<=0&&h<=0&&f<=0||l>=0&&p>=0&&h>=0&&f>=0}var i=function(){function t(){}return t.prototype.intersect=function(t){return e=this.a.x,o=this.a.y,n=this.b.x,r=this.b.y,a=this.c.x,c=this.c.y,i=this.d.x,d=this.d.y,s(e,o,u=t.a.x,l=t.a.y,p=t.b.x,h=t.b.y,f=t.c.x,y=t.c.y,_=t.d.x,v=t.d.y)||s(n,r,u,l,p,h,f,y,_,v)||s(a,c,u,l,p,h,f,y,_,v)||s(i,d,u,l,p,h,f,y,_,v)||s(u,l,e,o,n,r,a,c,i,d)||s(p,h,e,o,n,r,a,c,i,d)||s(f,y,e,o,n,r,a,c,i,d)||s(_,v,e,o,n,r,a,c,i,d);var e,o,n,r,a,c,i,d,u,l,p,h,f,y,_,v},t}(),d=cc._decorator,u=d.ccclass,l=d.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprite=null,e.factory=null,e.faceUp=!0,e.depth=0,e.value=-1,e.color=0,e}return __extends(e,t),Object.defineProperty(e.prototype,"faceUpEditor",{get:function(){return this.faceUp},set:function(t){this.faceUp=t,this.showValueEditor()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"valueEditor",{get:function(){return n.default.value2Str(this.value)},set:function(t){this.value=n.default.str2Value(t),this.showValueEditor()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthEditor",{get:function(){return this.depth},set:function(t){this.depth=t,this.node.zIndex=t},enumerable:!1,configurable:!0}),e.prototype.showValueEditor=function(){this.faceUp?-1==this.value?this.sprite.spriteFrame=this.factory.valueRandom:this.sprite.spriteFrame=this.factory.getSpriteFrame(this.value,this.color):-1==this.value?this.sprite.spriteFrame=this.factory.backgroundRandom:this.showBackground()},e.prototype.setValueEditor=function(t){this.color=n.default.random(0,3),this.value=t},e.prototype.getColor=function(){return this.color},e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t){t!=a.JokerValue?-1==t?(this.value=n.default.random(1,13),this.color=n.default.random(0,3)):(this.value=t,this.color=n.default.random(0,3)):this.value=t},Object.defineProperty(e.prototype,"rect",{get:function(){if(null==this._rect){this._rect=new i;var t=this.node.width/2,e=this.node.height/2,o=cc.v2(-t,e),n=cc.v2(t,e),r=cc.v2(t,-e),a=cc.v2(-t,-e);this._rect.a=this.node.convertToWorldSpaceAR(o),this._rect.b=this.node.convertToWorldSpaceAR(n),this._rect.c=this.node.convertToWorldSpaceAR(r),this._rect.d=this.node.convertToWorldSpaceAR(a)}return this._rect},enumerable:!1,configurable:!0}),e.prototype.start=function(){},e.isBlack=function(t){return 1==t||2==t},e.prototype.intersect=function(t){return this.rect.intersect(t.rect)},e.prototype.showValue=function(){this.sprite.spriteFrame=this.factory.getSpriteFrame(this.value,this.color)},e.prototype.showBackground=function(){this.sprite.spriteFrame=this.factory.background},e.prototype.setJoker=function(){this.value=a.JokerValue},e.prototype.open=function(){this.faceUp=!0,this.showValue()},e.prototype.close=function(){this.faceUp=!1,this.showBackground()},e.prototype.isJoker=function(){return this.value==a.JokerValue},e.prototype.onClick=function(){this.clickHandler&&this.clickHandler(this)},__decorate([l(cc.Sprite)],e.prototype,"sprite",void 0),__decorate([l(r.default)],e.prototype,"factory",void 0),__decorate([l({readonly:!0})],e.prototype,"faceUp",void 0),__decorate([l({type:cc.Boolean})],e.prototype,"faceUpEditor",null),__decorate([l({type:cc.String})],e.prototype,"valueEditor",null),__decorate([l({readonly:!0})],e.prototype,"depth",void 0),__decorate([l({type:cc.Integer})],e.prototype,"depthEditor",null),__decorate([l({readonly:!0})],e.prototype,"value",void 0),__decorate([u],e)}(cc.Component);o.default=p,cc._RF.pop()},{CardFactory:"CardFactory",CardFactoryBase:"CardFactoryBase",Util:"Util"}],Creator:[function(t,e,o){"use strict";cc._RF.push(e,"2b683GiXZhHlLsNmtnQqC+/","Creator"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.saveJson=function(e,o){t.saveString(e,JSON.stringify(o,null,"\t"))},t.saveString=function(t,e){var o="db://assets/"+t;Editor.assetdb.createOrSave(o,e,function(){})},t.log=function(t){Editor.log(t)},t}();o.default=n,cc._RF.pop()},{}],EditorInfo:[function(t,e,o){"use strict";cc._RF.push(e,"ac4f3dANkpIx5L24B6MRT8X","EditorInfo"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass,a=n.property;n.inspector;var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.disableCombo=!1,e.undoCost="",e.stars="",e.wildCost="",e.cardsInStack="",e.cost=0,e.reward=0,e.comboBonus="",e.comboCoinReward=0,e.extraCardCost="",e}return __extends(e,t),__decorate([a({displayName:"\u8fde\u51fb\u5956\u52b1\u5f00\u5173"})],e.prototype,"disableCombo",void 0),__decorate([a({displayName:"\u64a4\u9500\u6d88\u8017"})],e.prototype,"undoCost",void 0),__decorate([a({displayName:"\u661f\u661f\u5206\u6570"})],e.prototype,"stars",void 0),__decorate([a({displayName:"\u4e07\u80fd\u5361\u6d88\u8017"})],e.prototype,"wildCost",void 0),__decorate([a({displayName:"\u5f85\u9009\u5361\u5217\u8868"})],e.prototype,"cardsInStack",void 0),__decorate([a({displayName:"\u672c\u5173\u6d88\u8017"})],e.prototype,"cost",void 0),__decorate([a({displayName:"\u672c\u5173\u5956\u52b1"})],e.prototype,"reward",void 0),__decorate([a({displayName:"\u8fde\u51fb\u914d\u7f6e"})],e.prototype,"comboBonus",void 0),__decorate([a({displayName:"\u8fde\u51fb\u91d1\u5e01\u5956\u52b1"})],e.prototype,"comboCoinReward",void 0),__decorate([a({displayName:"\u989d\u5916\u5361\u6d88\u8017"})],e.prototype,"extraCardCost",void 0),__decorate([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],EditorSave:[function(t,e,o){"use strict";cc._RF.push(e,"f5a45s4JZ5Lh691NmAmgiRT","EditorSave"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("Creator"),r=t("Util"),a=t("Card"),c=t("CardFactory"),s=t("Editor"),i=t("EditorInfo"),d=cc._decorator,u=d.ccclass,l=d.property,p=d.inspector,h=[{key:"disableCombo",type:"boolean"},{key:"undoCost",type:"array"},{key:"stars",type:"array"},{key:"wildCost",type:"array"},{key:"cardsInStack",type:"array"},{key:"cost",type:"number"},{key:"reward",type:"number"},{key:"comboBonus",type:"array"},{key:"comboCoinReward",type:"number"},{key:"extraCardCost",type:"array"}],f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._bar=0,e}return __extends(e,t),Object.defineProperty(e.prototype,"bar",{get:function(){return this._bar},set:function(t){this._bar=t},enumerable:!1,configurable:!0}),e.prototype.start=function(){},e.prototype.doLoadLevel=function(t){var e=this.getComponent(s.default),o=this.getComponent(i.default);e.cardLayer.cardparent.removeAllChildren(),0!=t&&(null==c.default.instance&&(c.default.instance=this.getComponentInChildren(c.default)),cc.resources.load("lv/"+t,cc.JsonAsset,function(t,n){var a=r.default.expand(n.json);for(var c in e.cardLayer.loadInEditor(a),h){var s=h[c],i=a.settings[s.key];"array"==s.type?o[s.key]=i.join(","):"boolean"==s.type?o[s.key]=!!i:o[s.key]=i}}))},e.save=function(){for(var t=cc.find("Editor").getComponent(s.default),e=t.getComponent(i.default),o=t.cardLayer.cardparent.children,r=[],c=0;c<o.length;c++){var d=o[c].getComponent(a.default),u={faceUp:d.faceUp,depth:d.depth,value:d.getValue(),x:d.node.position.x,y:d.node.position.y,angle:-d.node.angle};r.push(u)}var l={},p=function(t){var o=h[t],n=e[o.key];if("array"==o.type){var r=n.split(","),a=[];r.forEach(function(t){return a.push(parseInt(t))}),l[o.key]=a}else l[o.key]=n};for(var c in h)p(c);var f={cards:r,settings:l};n.default.saveJson("resources/lv/"+t.level+".json",f),n.default.log("\u5173\u5361"+t.level+"\u4fdd\u5b58\u6210\u529f")},e.compress=function(t){var e=[];for(var o in t.cards){var n=t.cards[o];e.push([n.depth,n.faceUp?1:0,n.value,n.x,n.y,n.angle])}var r=[];for(var o in h){var a=h[o];r.push(t.settings[a.key])}return[e,r]},__decorate([l],e.prototype,"bar",null),__decorate([u,p("packages://gameedit/inspector.js")],e)}(cc.Component);o.default=f,cc._RF.pop()},{Card:"Card",CardFactory:"CardFactory",Creator:"Creator",Editor:"Editor",EditorInfo:"EditorInfo",Util:"Util"}],Editor:[function(t,e,o){"use strict";cc._RF.push(e,"0703bQ8Z/FIWpyNNig48uhf","Editor"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("Game"),r=cc._decorator,a=r.ccclass,c=r.property;r.inspector;var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cardLayer=null,e.level=0,e}return __extends(e,t),e.prototype.start=function(){},Object.defineProperty(e.prototype,"bar",{get:function(){return this.level},set:function(t){this.level=t,this.getComponent("EditorSave").doLoadLevel(t)},enumerable:!1,configurable:!0}),__decorate([c(n.default)],e.prototype,"cardLayer",void 0),__decorate([c({readonly:!0})],e.prototype,"level",void 0),__decorate([c({displayName:"\u52a0\u8f7d\u5173\u5361ID"})],e.prototype,"bar",null),__decorate([a],e)}(cc.Component);o.default=s,cc._RF.pop()},{Game:"Game"}],EventComponent:[function(t,e,o){"use strict";cc._RF.push(e,"6aeacr6ahRGSq6by8AZhmyB","EventComponent"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass;n.property;var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){this.onenter&&(this.node.onenter=this.onenter.bind(this))},__decorate([r],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],Finish:[function(t,e,o){"use strict";cc._RF.push(e,"33c2a/+2idDBLThsdVt/pMD","Finish"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("AudioManager"),r=t("EventComponent"),a=t("SceneManager"),c=t("Storge"),s=t("UIManager"),i=t("Gold"),d=t("ScrollLabel"),u=t("Star"),l=cc._decorator,p=l.ccclass,h=l.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stars=[],e.gold_text=null,e.scaleNode=null,e.btnStart=null,e.rewardGold=0,e}return __extends(e,t),e.prototype.start=function(){this.gold_text.node.active=!1,this.btnStart.active=!1,this.scaleNode.scale=0},e.prototype.onenter=function(t,e){var o=this;n.default.playSound("sound/deal_win"),c.default.STAR.inc(t),this.rewardGold=Math.floor(e.settings.reward*(t/3));for(var r=0;r<t;r++)this.stars[r].light();this.scaleNode.runAction(cc.sequence([cc.scaleTo(.9,1).easing(cc.easeBackOut()),cc.callFunc(function(){o.next1()})]))},e.prototype.next1=function(){this.btnStart.active=!0,this.btnStart.opacity=0,this.btnStart.runAction(cc.fadeIn(.5)),this.next2()},e.prototype.next2=function(){var t=this;this.gold_text.node.active=!0,this.gold_text.string="0",n.default.playSound("sound/coins_collection"),this.gold_text.getComponent(d.default).setup(0,this.rewardGold,1,function(){i.default.add(t.rewardGold)})},e.prototype.onClickContinue=function(){s.UIManager.close(this),a.SceneManager.show("Menu")},__decorate([h(u.default)],e.prototype,"stars",void 0),__decorate([h(cc.Label)],e.prototype,"gold_text",void 0),__decorate([h(cc.Node)],e.prototype,"scaleNode",void 0),__decorate([h(cc.Node)],e.prototype,"btnStart",void 0),__decorate([p],e)}(r.default);o.default=f,cc._RF.pop()},{AudioManager:"AudioManager",EventComponent:"EventComponent",Gold:"Gold",SceneManager:"SceneManager",ScrollLabel:"ScrollLabel",Star:"Star",Storge:"Storge",UIManager:"UIManager"}],Game:[function(t,e,o){"use strict";cc._RF.push(e,"919ddL98u1DH4wlxbG9tl0f","Game"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("SceneManager"),r=t("EventComponent"),a=t("StarManager"),c=t("Util"),s=t("UIManager"),i=t("AudioManager"),d=t("Gold"),u=t("StreakBonus"),l=t("Storge"),p=t("CardFactoryBase"),h=t("CardFactory"),f=cc._decorator,y=f.ccclass,_=f.property,v=function(){function t(){}return t.prototype.redo=function(){},t.prototype.undo=function(){},t}(),g=function(t){function e(e){var o=t.call(this)||this;return o.card=e,o}return __extends(e,t),e.prototype.redo=function(t){c.default.removeValue(t.allcards,this.card),this.opendCards=t.openCoverCards(this.card),t.resetCardState(this.card),t.flyTo(this.card),t.incContinue(this.card),t.flyGoldAtPos(this.card.node.getPosition(),t.continueCount);var e=t.continueCount;e>12&&(e=12),i.default.playSound("sound/tap_card_"+e),0==t.allcards.length&&t.winGame()},e.prototype.undo=function(t){var e=this,o=t.currentCard;c.default.removeValue(t.openedcards,o),t.allcards.push(o),t.decContinue(),t.currentCard=t.openedcards[t.openedcards.length-1],t.currentCard.node.active=!0;var n=cc.spawn([cc.moveTo(.5,cc.v2(o.data.x,o.data.y)),cc.rotateTo(.15,o.data.angle)]);o.node.runAction(cc.sequence([n,cc.callFunc(function(){e.opendCards.forEach(function(t){return t.close()}),o.node.zIndex=o.data.depth})]))},e}(v),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.redo=function(t){var e=h.default.make();e.setJoker(),e.showValue(),e.node.setPosition(t.jokerFlyPos),e.node.parent=t.cardparent,t.flyTo(e)},e.prototype.undo=function(t){var e=t.currentCard;c.default.removeValue(t.openedcards,e),t.currentCard=t.openedcards[t.openedcards.length-1],t.currentCard.node.active=!0,e.node.runAction(cc.sequence([cc.spawn([cc.moveBy(.3,cc.v2(0,100)),cc.fadeOut(.3)]),cc.removeSelf()]))},e}(v),C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.redo=function(t){var e=t.currentCard;t.openNextCard(),t.clearCountinue(),i.default.playSound("sound/card_flip"),t.tipWrong(e),0==t.stackcards.length&&(cc.log("no cards"),t.setMoreCardsShow(!0))},e.prototype.undo=function(t){var e=t.currentCard,o=0;t.stackcards.length>0&&(o=t.stackcards[t.stackcards.length-1].node.zIndex+1),t.adjustStackCards(),t.stackcards.push(e),c.default.removeValue(t.openedcards,e),t.setMoreCardsShow(!1),t.currentCard=t.openedcards[t.openedcards.length-1],t.currentCard.node.active=!0,e.node.zIndex=o,e.isJoker()||e.close(),e.node.runAction(cc.sequence([cc.moveTo(.2,t.stackedCardPos),cc.delayTime(.05),cc.callFunc(function(){t.updateStackLabel()})]))},e}(v),S=function(){function t(t){this.values=t,this.index=0}return t.prototype.next=function(){this.index<this.values.length-1&&this.index++},t.prototype.current=function(){return this.values[this.index]},t}(),b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stackPos=null,e.currentPos=null,e.jokerPos=null,e.btnJoker=null,e.btnMoreCards=null,e.btnUndo=null,e.starMgr=null,e.streakBonus=null,e.allcards=[],e.stackcards=[],e.openedcards=[],e.actions=[],e.stackedCardPos=null,e.currentCardPos=null,e.jokerFlyPos=null,e.currentCard=null,e.data=null,e.cardparent=null,e.flyGold=null,e.zindexCounter=100,e.continueCount=0,e.flyGoldTemp=null,e.shopNode=null,e}return __extends(e,t),e.prototype.start=function(){var t=this;this.flyGold.active=!1,this.stackedCardPos=this.convertpos(this.stackPos),this.currentCardPos=this.convertpos(this.currentPos),this.jokerFlyPos=this.convertpos(this.jokerPos),this.moreCardsPos=this.btnMoreCards.getPosition(),this.btnMoreCards.setPosition(this.btnMoreCards.getPosition().add(cc.v2(0,-900))),this.streakBonus.rewardFunc=function(){return t.onStreakBonus()}},e.prototype.onenter=function(t){var e=this;this.currentLevel=t,this.node.runAction(cc.sequence([cc.delayTime(.1),cc.callFunc(function(){e.doLoadLevel(t)})]))},e.prototype.resetCardState=function(t){t.node.stopAllActions(),t.node.angle=-t.data.angle,t.node.scale=1},e.prototype.isSeqence=function(t,e){var o=t.getValue(),n=e.getValue();return o==p.JokerValue||n==p.JokerValue||1==o&&13==n||1==n&&13==o||o==n-1||o==n+1||o==n},e.prototype.tipWrong=function(t){for(var e=null,o=0;o<this.allcards.length;o++){var n=this.allcards[o];if(n.faceUp&&this.isSeqence(t,n)&&this.isCardOnTop(n)){e=n;break}}if(e){this.resetCardState(e),i.default.playSound("sound/card_missed");var r=e.node.scale;e.node.zIndex=this.zindexCounter++,e.node.runAction(cc.sequence([cc.spawn([cc.scaleTo(.2,1.2*r),cc.rotateBy(.2,30)]),cc.rotateBy(.2,-60),cc.spawn([cc.scaleTo(.2,r),cc.rotateBy(.2,30)])]))}},e.prototype.loadLevel=function(t,e){var o=this;cc.resources.load("lv/"+t,cc.JsonAsset,function(t,n){var r=c.default.expand(n.json);o.doLoad(r),e(r)})},e.prototype.loadInEditor=function(t){for(var e=0;e<t.cards.length;e++){var o=t.cards[e],n=h.default.makeEditor(o);n.data=o,n.setValueEditor(o.value),n.node.angle=-o.angle,n.node.setPosition(cc.v2(o.x,o.y)),n.node.parent=this.cardparent,n.node.zIndex=o.depth,n.showValueEditor()}},e.prototype.doLoad=function(t){var e=this;this.data=t,t.settings.disableCombo?this.streakBonus.node.active=!1:this.streakBonus.setup(t);for(var o=0;o<t.cards.length;o++){var n=t.cards[o],r=cc.v2(n.x,n.y),a=r.add(cc.v2(0,1e3)),c=h.default.make();c.data=n,c.setValue(n.value),c.faceUp=n.faceUp,c.node.angle=-n.angle,c.node.setPosition(a),c.node.parent=this.cardparent,c.node.zIndex=n.depth,this.allcards.push(c);var s=.1+.05*o;c.node.runAction(cc.spawn(cc.moveTo(s,r),cc.rotateBy(s,360)))}var d=.1+.2+.05*this.allcards.length;i.default.playSound("sound/card_scenes_out"),this.node.runAction(cc.sequence([cc.delayTime(d),cc.callFunc(function(){e.step2()})]))},e.prototype.step2=function(){var t=this,e=this.data.settings.cardsInStack;this.addCards(e);var o=.04*e.length+.5;this.node.runAction(cc.sequence([cc.delayTime(o),cc.callFunc(function(){t.step3()})]))},e.prototype.step3=function(){var t=this;for(var e in console.log("step3"),this.updateStackLabel(),this.allcards){var o=this.allcards[e];o.clickHandler=function(e){return t.onClickCard(e)},o.data.faceUp&&o.open()}this.openNextCard()},e.prototype.flyTo=function(t){var e=this,o=this.currentCard;this.currentCard=t,this.openedcards.push(t);var n=0;this.currentCard&&(n=this.currentCard.node.zIndex+2),t.node.zIndex=n;var r=cc.spawn([cc.jumpTo(.5,this.currentCardPos,400,1),cc.sequence([cc.rotateBy(.35,540),cc.rotateTo(.15,720)])]);t.node.runAction(cc.sequence([r,cc.callFunc(function(){o&&(o.node.active=!1),e.allcards.length})]))},e.prototype.addCards=function(t,e){var o=this,n=this.stackedCardPos.add(cc.v2(-200,-300)),r=t.length;e?i.default.playSound("sound/card_more5_add"):i.default.playSound("sound/deal_cards_in");for(var a=0;a<t.length;a++){var s=t[a],d=h.default.make(),u={value:s};d.data=u,d.setValue(u.value),d.node.parent=this.cardparent,d.node.setPosition(n),d.node.zIndex=r-a,d.node.runAction(cc.sequence([cc.delayTime(.04*(r-a)),cc.moveTo(.04,this.stackedCardPos.add(cc.v2(-10*a,0))),cc.callFunc(c.default.bind(function(t){o.updateStackLabel(t)},r-a))])),this.stackcards.unshift(d)}},e.prototype.isCardOnTop=function(t){for(var e in this.allcards){var o=this.allcards[e];if(o.data.depth>t.data.depth&&o.intersect(t))return cc.log("convered"),!1}return!0},e.prototype.shouldOpenCard=function(t){return t.faceUp?this.isSeqence(t,this.currentCard)?this.isCardOnTop(t):(cc.log("not seq"),t.node.runAction(cc.sequence([cc.scaleTo(.1,1.2),cc.scaleTo(.1,1)])),!1):(cc.log("not open"),!1)},e.prototype.onClickCard=function(t){this.shouldOpenCard(t)?this.pushAction(new g(t)):i.default.playSound("sound/card_wrong")},e.prototype.pushAction=function(t){t.redo(this),this.actions.push(t),1==this.actions.length&&(this.btnUndo.active=!0)},e.prototype.openCoverCards=function(t){var e=[];for(var o in this.allcards)(s=this.allcards[o]).data.depth<t.data.depth&&s.intersect(t)&&e.push(s);var n=[];for(var o in e){var r=e[o],a=!0;for(var c in this.allcards){var s;if((s=this.allcards[c]).data.depth>r.data.depth&&s.intersect(r)){a=!1;break}}a&&(r.faceUp||(r.open(),n.push(r)))}return n},e.prototype.openNextCard=function(){if(0!=this.stackcards.length){this.clearCountinue();var t=this.stackcards[this.stackcards.length-1];c.default.removeValue(this.stackcards,t),this.openedcards.push(t);var e=0;this.currentCard&&(e=this.currentCard.node.zIndex),this.updateStackLabel(),t.open();var o=this.currentCard;this.currentCard=t,t.node.zIndex=100,t.node.runAction(cc.sequence([cc.moveTo(.2,this.currentCardPos),cc.delayTime(.05),cc.callFunc(function(){t.node.zIndex=e,o&&(o.node.active=!1)})])),this.adjustStackCards()}},e.prototype.clearCountinue=function(){this.continueCount=0,this.streakBonus.cancel()},e.prototype.incContinue=function(t){this.continueCount++,this.streakBonus.push(t.getValue(),t.getColor())},e.prototype.decContinue=function(){this.continueCount--,this.streakBonus.pop()},e.prototype.onClickTest=function(t){console.log(t)},e.prototype.hasUndo=function(){return this.actions.length>0},e.prototype.updateStackLabel=function(){},e.prototype.convertpos=function(t){return cc.v2(t.position)},e.prototype.doLoadLevel=function(t){var e=this;this.loadLevel(t,function(t){e.jokerCoster=new S([500,750]),e.moreCardCoster=new S([300,500]),e.undoCoster=new S([300,500]),e.btnUndo.active=!1,e.updateCosterLabel(),e.starMgr.setup(t.settings.stars)})},e.prototype.updateCosterLabel=function(){this.btnJoker.getChildByName("label").getComponent(cc.Label).string=""+this.jokerCoster.current(),this.btnMoreCards.getChildByName("label").getComponent(cc.Label).string=""+this.moreCardCoster.current(),this.btnUndo.getChildByName("label").getComponent(cc.Label).string=""+this.undoCoster.current()},e.prototype.setMoreCardsShow=function(t){this.btnMoreCards.stopAllActions(),t?(i.default.playSound("sound/card_more5_in"),this.btnMoreCards.runAction(cc.moveTo(.2,this.moreCardsPos))):this.btnMoreCards.runAction(cc.moveTo(.2,this.moreCardsPos.add(cc.v2(0,-900))))},e.prototype.onClickBack=function(){n.SceneManager.show("Menu")},e.prototype.action_undo=function(){0!=this.actions.length&&(i.default.playSound("sound/card_flip_back"),this.actions.pop().undo(this),this.hasUndo()||(this.btnUndo.active=!1))},e.prototype.onClickNext=function(){this.stackcards.length>0?this.pushAction(new C):cc.log("no cards")},e.prototype.onAddCards=function(){var t=this;if(d.default.use(this.moreCardCoster.current())){this.moreCardCoster.next(),this.updateCosterLabel();for(var e=0,o=0;o<this.allcards.length;o++){var n=this.allcards[o];if(n.faceUp&&this.isCardOnTop(n)){e=n.getValue();break}}13!=e?e+=1:e=1,this.btnMoreCards.runAction(cc.sequence([cc.moveTo(.2,this.moreCardsPos.add(cc.v2(0,-900))),cc.callFunc(function(){return t.addCards([-1,-1,-1,e,-1],!0)})]))}else this.buyGold()},e.prototype.onCLickJoker=function(){d.default.use(this.jokerCoster.current())?(this.jokerCoster.next(),this.updateCosterLabel(),i.default.playSound("sound/card_wild_click"),this.pushAction(new m)):this.buyGold()},e.prototype.onClickShop=function(){this.buyGold()},e.prototype.onClickOptions=function(){s.UIManager.show("Setting",!0,this.currentLevel)},e.prototype.onCLickUndo=function(){this.hasUndo()&&(d.default.use(this.undoCoster.current())?(this.undoCoster.next(),this.updateCosterLabel(),this.action_undo()):this.buyGold())},e.prototype.flyGoldAtPos=function(t,e){d.default.add(e),this.starMgr.addGold(e);var o=cc.instantiate(this.flyGold);o.parent=this.node,o.setPosition(t),o.getComponentInChildren(cc.Label).string=""+e,o.active=!0,o.runAction(cc.sequence([cc.moveBy(.5,cc.v2(0,100)),cc.destroySelf()]))},e.prototype.winGame=function(){var t=this;l.default.LEVEL.inc(1),this.node.runAction(cc.sequence([cc.delayTime(.3),cc.callFunc(function(){t.winGame2()})]))},e.prototype.winGame2=function(){var t=this;this.stackcards.length>0?(i.default.playSound("sound/card_clear"),this.node.runAction(cc.sequence([cc.delayTime(.8),cc.callFunc(function(){t.winGame_withCards()})]))):this.winGame3()},e.prototype.winGame_withCards=function(){for(var t=this,e=this.stackcards.length-1,o=function(o){var r=n.stackcards[o],a=10*(e-o)+10;r.node.runAction(cc.sequence([cc.delayTime(.1*(e-o)),cc.spawn([cc.moveBy(.2,cc.v2(0,100)),cc.fadeOut(.2)]),cc.callFunc(function(){i.default.playSound("sound/number_count"),t.flyGoldAtPos(r.node.getPosition(),a)}),cc.destroySelf()]))},n=this,r=e;r>=0;r--)o(r);this.node.runAction(cc.sequence([cc.delayTime(.2*e+.2),cc.callFunc(function(){t.winGame3()})]))},e.prototype.winGame3=function(){s.UIManager.show("Finish",this.starMgr.getStar(),this.data)},e.prototype.adjustStackCards=function(t){for(var e=this.stackcards.length,o=e-1;o>=0;o--){var n=this.stackcards[o];n.node.zIndex=o,t&&t(n)||(n.node.stopAllActions(),n.node.runAction(cc.moveTo(.1,this.stackedCardPos.add(cc.v2(-10*(e-o),0)))))}},e.prototype.onStreakBonus=function(){var t=this.streakBonus.tGold.convertToWorldSpaceAR(cc.Vec2.ZERO);if(this.streakBonus.currentType==u.BonusType.Gold&&d.default.fly(this.streakBonus.goldBonus,this.node,this.shopNode.parent.convertToNodeSpaceAR(t),this.shopNode.getPosition(),this.shopNode.parent,this.flyGoldTemp),this.streakBonus.currentType==u.BonusType.Joker){i.default.playSound("sound/card_wild_collection");var e=h.default.make();e.setJoker(),e.showValue(),e.node.setPosition(this.cardparent.convertToNodeSpaceAR(t)),e.node.parent=this.cardparent;var o=c.default.randomNext(0,this.stackcards.length);this.stackcards.splice(o,0,e);var n=this.stackcards.length-o;this.adjustStackCards(function(t){return t==e});var r=cc.spawn([cc.jumpTo(.5,this.stackedCardPos.add(cc.v2(-10*n,0)),400,1),cc.sequence([cc.rotateBy(.35,540),cc.rotateTo(.15,720)])]);e.node.runAction(r)}if(this.streakBonus.currentType==u.BonusType.Card){i.default.playSound("sound/card_wild_collection");var a=h.default.make(),s={value:-1};a.data=s,a.setValue(s.value),a.showBackground(),a.node.setPosition(this.cardparent.convertToNodeSpaceAR(t)),a.node.parent=this.cardparent,o=c.default.randomNext(0,this.stackcards.length),this.stackcards.splice(o,0,a),n=this.stackcards.length-o,this.adjustStackCards(function(t){return t==a}),r=cc.spawn([cc.jumpTo(.5,this.stackedCardPos.add(cc.v2(-10*n,0)),400,1),cc.sequence([cc.rotateBy(.35,540),cc.rotateTo(.15,720)])]),a.node.runAction(r)}},e.prototype.buyGold=function(){s.UIManager.show("Shop",this)},__decorate([_(cc.Node)],e.prototype,"stackPos",void 0),__decorate([_(cc.Node)],e.prototype,"currentPos",void 0),__decorate([_(cc.Node)],e.prototype,"jokerPos",void 0),__decorate([_(cc.Node)],e.prototype,"btnJoker",void 0),__decorate([_(cc.Node)],e.prototype,"btnMoreCards",void 0),__decorate([_(cc.Node)],e.prototype,"btnUndo",void 0),__decorate([_(a.default)],e.prototype,"starMgr",void 0),__decorate([_(u.default)],e.prototype,"streakBonus",void 0),__decorate([_(cc.Node)],e.prototype,"cardparent",void 0),__decorate([_(cc.Node)],e.prototype,"flyGold",void 0),__decorate([_(cc.Node)],e.prototype,"flyGoldTemp",void 0),__decorate([_(cc.Node)],e.prototype,"shopNode",void 0),__decorate([y],e)}(r.default);o.default=b,cc._RF.pop()},{AudioManager:"AudioManager",CardFactory:"CardFactory",CardFactoryBase:"CardFactoryBase",EventComponent:"EventComponent",Gold:"Gold",SceneManager:"SceneManager",StarManager:"StarManager",Storge:"Storge",StreakBonus:"StreakBonus",UIManager:"UIManager",Util:"Util"}],Gold:[function(t,e,o){"use strict";cc._RF.push(e,"0b9c9QyqT9B243Smb/yMW0K","Gold"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("AudioManager"),r=t("Storge"),a=t("Util"),c=cc._decorator,s=c.ccclass,i=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e}var o;return __extends(e,t),o=e,e.prototype.start=function(){this.updateDisplay()},e.prototype.updateDisplay=function(){this.label.string=""+o.get()},e.prototype.onEnable=function(){o.current=this},e.prototype.onDisable=function(){},e.prototype.onClick=function(){o.use(-1e3)},e.get=function(){return r.default.GOLD.get()},e.set=function(t){r.default.GOLD.set(t),null!=o.current&&o.current.updateDisplay()},e.add=function(t){o.set(o.get()+t)},e.use=function(t){return o.get()>=t&&(o.set(o.get()-t),!0)},e.fly=function(t,e,r,c,s,i,d){void 0===d&&(d=70),n.default.playSound("sound/gift_open"),e.runAction(cc.sequence([cc.delayTime(1.1),cc.callFunc(function(){o.add(t),n.default.playSound("sound/coins_collection")})]));for(var u=0;u<d;u++){var l=r.add(cc.v2(a.default.random(-80,80),-100+a.default.random(-80,80))),p=cc.instantiate(i);p.active=!0,p.parent=s,p.setPosition(r),p.runAction(cc.sequence([cc.delayTime(.01*u),cc.moveTo(.3,l),cc.delayTime(.2),cc.moveTo(.9,c),cc.destroySelf()]))}},e.current=null,__decorate([i(cc.Label)],e.prototype,"label",void 0),o=__decorate([s],e)}(cc.Component);o.default=d,cc._RF.pop()},{AudioManager:"AudioManager",Storge:"Storge",Util:"Util"}],Menu:[function(t,e,o){"use strict";cc._RF.push(e,"3ece6m5WaJAZoFV/gsbUfa3","Menu"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("SceneManager"),r=t("EventComponent"),a=t("UIManager"),c=t("AudioManager"),s=t("Gold"),i=t("Storge"),d=t("PlatformSystem"),u=cc._decorator,l=u.ccclass,p=u.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.goldNode=null,e.shopNode=null,e.goldTemp=null,e.timeLabel=null,e.levelLabel=null,e.levelCostLabel=null,e.inteval=1,e.displayStr=!0,e}return __extends(e,t),e.prototype.start=function(){this.updateLevel(),this.updateLabel(),c.default.playMusic("sound/bgm",!0),cc.resources.preload("prefabs/sc/Game",cc.Prefab),d.default.platform.showBannerAd()},e.prototype.onClickStart=function(){var t=this,e=i.default.LEVEL.get();cc.resources.load("lv/"+e,cc.JsonAsset,function(){s.default.use(1e3)?n.SceneManager.show("Game",e):a.UIManager.show("Shop",t)})},e.prototype.onClickOptions=function(){a.UIManager.show("Setting")},e.prototype.onClickLevels=function(){n.SceneManager.show("Theme")},e.prototype.onClickTest=function(){var t=this.node.getComponentInChildren(cc.EditBox),e=parseInt(t.string);n.SceneManager.show("Game",e)},e.prototype.onClickFreegold=function(){this.createFreeGolds()},e.prototype.onClickShop=function(){a.UIManager.show("Shop",this)},e.prototype.updateLevel=function(){var t=this,e=i.default.LEVEL.get();this.levelLabel.string="LEVEL"+e,cc.resources.load("lv/"+e,cc.JsonAsset,function(){t.levelCostLabel.string="- 1000"})},e.prototype.update=function(t){this.inteval-=t,this.inteval<0&&(this.inteval=1,this.displayStr?this.displayStr=!1:this.displayStr=!0,this.updateLabel())},e.prototype.updateLabel=function(){var t=this.getRewardIntervalSecond()-this.getSecondSinceLastTime();t<0?this.displayStr?this.timeLabel.string="Collect coins":this.timeLabel.string="":this.timeLabel.string=this.pad(t/60)+":"+this.pad(Math.floor(t)%60)},e.prototype.pad=function(t){return t<10?"0"+Math.floor(t):Math.floor(t)},e.prototype.getSecondSinceLastTime=function(){var t=new Date(i.default.RewardTime.get()),e=new Date;return Number(e.getTime()-t.getTime())/1e3},e.prototype.getRewardIntervalSecond=function(){return 3600},e.prototype.isRewardOK=function(t){return t>=this.getRewardIntervalSecond()},e.prototype.createFreeGolds=function(){if(this.isRewardOK(this.getSecondSinceLastTime())){i.default.RewardTime.set((new Date).toString());var t=this.goldNode.getPosition(),e=this.shopNode.getPosition();s.default.fly(2e3,this.node,t,e,this.goldNode.parent,this.goldTemp)}},e.prototype.videoReward=function(t){var e=t.clone(),o=this.shopNode.getPosition();s.default.fly(1e4,this.node,e,o,this.goldNode.parent,this.goldTemp,6)},__decorate([p(cc.Node)],e.prototype,"goldNode",void 0),__decorate([p(cc.Node)],e.prototype,"shopNode",void 0),__decorate([p(cc.Node)],e.prototype,"goldTemp",void 0),__decorate([p(cc.Label)],e.prototype,"timeLabel",void 0),__decorate([p(cc.Label)],e.prototype,"levelLabel",void 0),__decorate([p(cc.Label)],e.prototype,"levelCostLabel",void 0),__decorate([l],e)}(r.default);o.default=h,cc._RF.pop()},{AudioManager:"AudioManager",EventComponent:"EventComponent",Gold:"Gold",PlatformSystem:"PlatformSystem",SceneManager:"SceneManager",Storge:"Storge",UIManager:"UIManager"}],PlatformDefault:[function(t,e,o){"use strict";cc._RF.push(e,"244b9zMcvpD86mrCf3dTyOT","PlatformDefault"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.prototype.initialize=function(){console.log("\u521d\u59cb\u5316\u9ed8\u8ba4\u5e7f\u544a\u6846\u67b6")},t.prototype.showToast=function(t){console.log("\u663e\u793atoast  ",t)},t.prototype.shareAppMessage=function(t){void 0===t&&(t={}),console.log("\u5206\u4eab ",t)},t.prototype.vibrateShort=function(t){void 0===t&&(t={}),console.log("\u77ed\u9707\u52a8 ",t)},t.prototype.vibrateLong=function(t){void 0===t&&(t={}),console.log("\u957f\u9707\u52a8 ",t)},t.prototype.shareShowReward=function(t){void 0===t&&(t=null),console.log("\u76f4\u63a5\u6267\u884c\u5206\u4eab\u56de\u8c03"),t&&t()},t.prototype.showRewardVideo=function(t){void 0===t&&(t=null),console.log("\u76f4\u63a5\u6267\u884c\u89c6\u9891\u56de\u8c03"),t&&t(!0)},t.prototype.showBannerAd=function(){console.log("\u663e\u793abanner\u5e7f\u544a")},t.prototype.hideBannerAd=function(t){void 0===t&&(t=!1),console.log("\u9690\u85cfbanner\u5e7f\u544a\uff0c\u5237\u65b0\uff1a",t)},t.prototype.refreshBannerAd=function(){console.log("\u5237\u65b0banner\u5e7f\u544a")},t.prototype.showInterstitialAd=function(){console.log("\u663e\u793a\u63d2\u5c4f\u5e7f\u544a")},t.prototype.showCustomAd=function(){console.log("\u663e\u793a\u81ea\u5b9a\u4e49\u5e7f\u544a")},t.prototype.hideCustomAd=function(){console.log("\u9690\u85cf\u81ea\u5b9a\u4e49\u5e7f\u544a")},t.prototype.showSigleCustomAd=function(){console.log("\u5c55\u793a\u5355\u4e2a\u81ea\u5b9a\u4e49\u5e7f\u544a")},t.prototype.hideSigleCustomAd=function(){console.log("\u9690\u85cf\u5c55\u793a\u5355\u4e2a\u81ea\u5b9a\u4e49\u5e7f\u544a")},t.prototype.exitGame=function(){console.log("\u9000\u51fa\u6e38\u620f")},t.prototype.__createVideoAd=function(){console.log("\u521b\u5efa\u89c6\u9891\u5e7f\u544a")},t.prototype.__createBannerAd=function(){console.log("\u521b\u5efabanner\u5e7f\u544a")},t.prototype.__createInterstitialAd=function(){console.log("\u521b\u5efa\u63d2\u5c4f\u5e7f\u544a")},t.prototype.__customAdExist=function(){console.log("\u683c\u5b50\u5e7f\u544a\u662f\u5426\u5b58\u5728")},t}();o.default=new n,cc._RF.pop()},{}],PlatformSystem:[function(t,e,o){"use strict";cc._RF.push(e,"2088cX/QlROH73LO9trBvQU","PlatformSystem"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("PlatformWX"),r=t("PlatformDefault"),a=function(){function t(){this._platformWX=n.default,this._platformDefault=r.default}return Object.defineProperty(t.prototype,"platform",{get:function(){switch(cc.sys.platform){case cc.sys.WECHAT_GAME:return this._platformWX;default:return this._platformDefault}},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){switch(cc.sys.platform){case cc.sys.WECHAT_GAME:this._platformWX.initialize();break;default:this._platformDefault.initialize()}},t}();o.default=new a,cc._RF.pop()},{PlatformDefault:"PlatformDefault",PlatformWX:"PlatformWX"}],PlatformWX:[function(t,e,o){"use strict";cc._RF.push(e,"0f089L8EcdJW6rxp96NO3vk","PlatformWX"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("wxConfig"),r=function(){function t(){this._onHideTime=1/0,this._shareTimes=0,this._shareSuccessHandler=null,this._videoSuccessHandler=null,this._customAdCloseHandler=null,this._showInterstitialAdTime=null,this._shareModalIsActive=!1,this._shareStr="\u7eb8\u724c\u63a5\u9f99\u521b\u65b0\u73a9\u6cd5\uff0c\u4f60\u80fd\u95ef\u5230\u7b2c\u51e0\u5173\uff1f"}return t.prototype.initialize=function(){var t=this;console.log("\u521d\u59cb\u5316\u5fae\u4fe1\u6846\u67b6"),wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"],success:function(){},fail:function(){},complete:function(){}}),wx.onShareAppMessage(function(){wx.shareAppMessage({title:this._shareStr,query:"shareMsg=a=1"})}.bind(this)),wx.onShow(function(){if(null!=t._shareSuccessHandler&&!t._shareModalIsActive){switch(t._shareTimes+=1,t._shareTimes){case 1:wx.showModal({title:"\u5206\u4eab\u5931\u8d25",content:"\u6210\u529f\u5206\u4eab\u5230\u7fa4\u5373\u53ef\u83b7\u5f97\u5956\u52b1",success:function(e){e.confirm?t.shareShowReward(t._shareSuccessHandler):e.cancel&&(t._shareSuccessHandler=null,t._shareTimes=0),t._shareModalIsActive=!1}}),t._shareModalIsActive=!0;break;case 2:Date.now()-t._onHideTime>=4e3?(t._shareSuccessHandler&&t._shareSuccessHandler(),t._shareTimes=0):(wx.showModal({title:"\u5206\u4eab\u5931\u8d25",content:"\u6210\u529f\u5206\u4eab\u5230\u7fa4\u5373\u53ef\u83b7\u5f97\u5956\u52b1",success:function(e){e.confirm?t.shareShowReward(t._shareSuccessHandler):e.cancel&&(t._shareSuccessHandler=null,t._shareTimes=0),t._shareModalIsActive=!1}}),t._shareModalIsActive=!0);break;case 3:t._shareSuccessHandler&&t._shareSuccessHandler(),t._shareSuccessHandler=null,t._shareTimes=0}t._onHideTime=1/0}}),this.__createBannerAd(),this.__createVideoAd()},t.prototype.showToast=function(t){var e={title:"",icon:"none",duration:2e3};Object.assign(e,t),wx.showToast(e)},t.prototype.shareAppMessage=function(t){void 0===t&&(t={}),wx.shareAppMessage(t)},t.prototype.vibrateShort=function(t){void 0===t&&(t={}),wx.vibrateShort(t)},t.prototype.vibrateLong=function(t){void 0===t&&(t={}),wx.vibrateLong(t)},t.prototype.shareShowReward=function(t){void 0===t&&(t=null),t&&(this._shareSuccessHandler=t),this._onHideTime=Date.now(),this.shareAppMessage({title:this._shareStr,query:"shareMsg=a=1"})},t.prototype.showRewardVideo=function(t){var e=this;void 0===t&&(t=null),this._rewardVideo?(this._videoSuccessHandler=t,this._rewardVideo.show().then(function(){console.log("\u89c6\u9891\u64ad\u653e\u6210\u529f")}).catch(function(){e._rewardVideo.load().then(function(){e._rewardVideo.show().then(function(){console.log("\u89c6\u9891\u91cd\u65b0\u52a0\u8f7d\uff0c\u64ad\u653e\u6210\u529f")})}).catch(function(){var o;null===(o=e._videoSuccessHandler)||void 0===o||o.call(e,!1),e.shareShowReward(t),e._videoSuccessHandler=null})})):this.__turnVideoToShare(t)},t.prototype.showBannerAd=function(){var t=this;if(this._bannerAd){var e=wx.getSystemInfoSync(),o=e.screenWidth,n=e.screenHeight;this._bannerAd.show().then(function(){t._bannerAd.style.left=(o-t._bannerAd.style.realWidth)/2,t._bannerAd.style.top=n-t._bannerAd.style.realHeight}).catch(function(t){console.log("banner\u5e7f\u544a\u663e\u793a\u51fa\u9519",t)})}},t.prototype.hideBannerAd=function(t){void 0===t&&(t=!1),this._bannerAd&&(this._bannerAd.hide(),t&&this.refreshBannerAd())},t.prototype.refreshBannerAd=function(){this._bannerAd&&(this._bannerAd.destroy(),this.__createBannerAd())},t.prototype.showInterstitialAd=function(t){if(void 0===t&&(t=!1),t){if(!this._interstitialAd)return;this._interstitialAd.show()}else{if(!this._interstitialAd)return;var e=Date.now();if(null==this._showInterstitialAdTime)return void(this._showInterstitialAdTime=e);e-this._showInterstitialAdTime>12e4&&(this._interstitialAd.show(),this._showInterstitialAdTime=e)}},t.prototype.showCustomAd=function(t){this._customAd&&(this._customAdCloseHandler=t,this._customAd.show().catch(function(t){console.log("\u539f\u751f\u5e7f\u544a\u663e\u793a\u51fa\u9519",t)}))},t.prototype.hideCustomAd=function(){this._customAd&&this._customAd.hide().catch(function(t){console.log("\u539f\u751f\u5e7f\u544a\u9690\u85cf\u51fa\u9519",t)})},t.prototype.showSigleCustomAd=function(){this._sigleCustomAd&&this._sigleCustomAd.show().catch(function(t){console.log("\u539f\u751f\u5f53\u4e2a\u683c\u5b50\u5e7f\u544a\u663e\u793a\u51fa\u9519",t)})},t.prototype.hideSigleCustomAd=function(){this._sigleCustomAd&&this._sigleCustomAd.hide().catch(function(t){console.log("\u9690\u85cf\u5355\u4e2a\u683c\u5b50\u5e7f\u544a\u51fa\u9519",t)})},t.prototype.__customSigleAdExist=function(){var t=this;this._sigleCustomAd||this.__createSigleCustomAd(),this._sigleCustomAd.show().then(function(){t._sigleCustomAd.isShow()&&t.hideSigleCustomAd()}).catch(function(){t._sigleCustomAd.isShow()&&t.hideSigleCustomAd()})},t.prototype.__customAdExist=function(){var t=this;this._customAd||this.__createCustomAd(),this._customAd.show().then(function(){t._customAd.isShow()&&t.hideCustomAd()}).catch(function(){t._customAd.isShow()&&t.hideCustomAd()})},t.prototype.exitGame=function(){wx.exitMiniProgram({})},t.prototype.__createVideoAd=function(){var t=this;n.WX_CONFIG.AD_ID.video&&(this._rewardVideo=wx.createRewardedVideoAd({adUnitId:n.WX_CONFIG.AD_ID.video}),this._rewardVideo.onClose(function(e){var o,n;e&&e.isEnded||void 0===e?null===(o=t._videoSuccessHandler)||void 0===o||o.call(t,!0):(t.showToast({title:"\u5b8c\u6574\u89c2\u770b\u89c6\u9891\u624d\u6709\u5956\u52b1\u54e6"}),null===(n=t._videoSuccessHandler)||void 0===n||n.call(t,!1)),t._videoSuccessHandler=null}),this._rewardVideo.onError(function(){var e;null===(e=t._videoSuccessHandler)||void 0===e||e.call(t,!1),t.showToast({title:"\u6682\u65f6\u6ca1\u6709\u53ef\u89c2\u770b\u7684\u89c6\u9891"}),t.shareShowReward(t._videoSuccessHandler),t._videoSuccessHandler=null}))},t.prototype.__createBannerAd=function(){if(n.WX_CONFIG.AD_ID.banner){var t=wx.getSystemInfoSync();this.isNormalScreen();var e=.8*t.screenWidth;this._bannerAd=wx.createBannerAd({adUnitId:n.WX_CONFIG.AD_ID.banner,adIntervals:600,style:{left:0,top:t.screenHeight,width:e,height:70}}),this._bannerAd.onError(function(t){t.errCode}),this._bannerAd.onResize(function(){})}},t.prototype.__createInterstitialAd=function(){n.WX_CONFIG.AD_ID.interstitial&&(this._interstitialAd=wx.createInterstitialAd({adUnitId:n.WX_CONFIG.AD_ID.interstitial}))},t.prototype.__createCustomAd=function(){var t=this;if(n.WX_CONFIG.AD_ID.multiGridCustom){var e=wx.getSystemInfoSync();this._customAd=wx.createCustomAd({adUnitId:n.WX_CONFIG.AD_ID.multiGridCustom,adIntervals:60,style:{left:0,top:.16*e.screenHeight,with:.9*e.screenWidth}}),this._customAd.onHide(function(){t._customAdCloseHandler&&t._customAdCloseHandler()}),this._customAd.onError(function(t){t.errCode})}},t.prototype.__createSigleCustomAd=function(){if(n.WX_CONFIG.AD_ID.sigleGridCustom){var t=wx.getSystemInfoSync(),e=this.isNormalScreen();this._sigleCustomAd=wx.createCustomAd({adUnitId:n.WX_CONFIG.AD_ID.sigleGridCustom,adIntervals:60,style:{left:.49*t.screenWidth,top:.038*t.screenHeight+(e?20:35)}}),this._sigleCustomAd.onError(function(){console.log("\u5c55\u793a\u683c\u5b50\u5e7f\u544a\u5931\u8d251")})}},t.prototype.__turnVideoToShare=function(t){this.shareShowReward(t),this._videoSuccessHandler=null},t.prototype.isNormalScreen=function(){return cc.winSize.height/cc.winSize.width<1.78},t}();o.default=new r,cc._RF.pop()},{wxConfig:"wxConfig"}],PrefabCache:[function(t,e,o){"use strict";cc._RF.push(e,"0afb7cnyvZLioYdfZVPsHqq","PrefabCache"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.get=function(t,e){var o=this,n=this._caches[t];n?e(null,n):cc.resources.load(t,function(n,r){if(n)return cc.log(n),void e(n.message,null);o._caches[t]=r,e(null,r)})},t.getSync=function(t){return this._caches[t]},t.free=function(t){delete this._caches[t]},t.preload=function(t,e,o){var n=this;cc.resources.load(t,cc.Prefab,e,function(e,r){if(e)return cc.log(e),void o(e);for(var a=0;a<t.length;a++){var c=t[a];n._caches[c]=r[a]}o(null,r)})},t._caches={},t}();o.default=n,cc._RF.pop()},{}],SceneManager:[function(t,e,o){"use strict";cc._RF.push(e,"a148b4TXKlHmIQWsMmMtYtW","SceneManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.SceneManager=void 0;var n=t("PlatformSystem"),r=t("PrefabCache"),a=cc._decorator,c=a.ccclass,s=a.property,i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sceneParent=null,e.firstScene=null,e}var o;return __extends(e,t),o=e,e.prototype.onLoad=function(){o.instance=this,n.default.initialize(),this.actualShow(cc.instantiate(this.firstScene))},e.show=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];(e=o.instance).showScene.apply(e,__spreadArrays([t],n))},e.prototype.showScene=function(t){for(var e=this,o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];cc.log("SceneManager show",t,o),this.current&&t==this.current.name||r.default.get("prefabs/sc/"+t,function(t,n){if(t)return cc.log(t);e.actualShow.apply(e,__spreadArrays([cc.instantiate(n)],o))})},e.prototype.actualShow=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];if(this.next=t,this.next.parent=this.sceneParent,this.next.zIndex=0,this.current&&(this.current.zIndex=1),this.next){var n=this.current;this.current=this.next,n&&(n.onleave&&n.onleave(),cc.sys.garbageCollect(),n.parent=null,n.destroy()),this.current.parent=this.sceneParent,this.next=null;var r=this.current;r.onenter&&r.onenter.apply(r,e)}},__decorate([s(cc.Node)],e.prototype,"sceneParent",void 0),__decorate([s(cc.Prefab)],e.prototype,"firstScene",void 0),o=__decorate([c],e)}(cc.Component);o.SceneManager=i,cc._RF.pop()},{PlatformSystem:"PlatformSystem",PrefabCache:"PrefabCache"}],ScrollLabel:[function(t,e,o){"use strict";cc._RF.push(e,"de3f00YFrBCZZ8ULOu12IVf","ScrollLabel"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass;n.property;var a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isStart=!1,e}return __extends(e,t),e.prototype.start=function(){this.label=this.getComponent(cc.Label)},e.prototype.setup=function(t,e,o,n){this.from=t,this.to=e,this.time=o,this.isStart=!0,this.cb=n,this.step=0},e.prototype.update=function(t){if(this.isStart){this.step+=t;var e=Math.min(this.step/this.time,1);this.label.string=""+Math.floor(cc.misc.lerp(this.from,this.to,e)),1==e&&(this.isStart=!1,this.cb())}},__decorate([r],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],Setting:[function(t,e,o){"use strict";cc._RF.push(e,"fc127mpyHZKsrRlvMaIsgfG","Setting"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("AudioManager"),r=t("EventComponent"),a=t("SceneManager"),c=t("UIManager"),s=cc._decorator,i=s.ccclass,d=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.music=null,e.sound=null,e.buttons=null,e}return __extends(e,t),e.prototype.start=function(){this.updateDisplay()},e.prototype.onenter=function(t,e){this.buttons.active=!!t,this.currentLevel=e},e.prototype.updateDisplay=function(){this.setOpen(this.music,n.default.musicOpen),this.setOpen(this.sound,n.default.soundOpen)},e.prototype.setOpen=function(t,e){t.getChildByName("btnon").active=e,t.getChildByName("btnoff").active=!e},e.prototype.onClickClose=function(){c.UIManager.close(this)},e.prototype.onClickMusic=function(){n.default.musicOpen=!n.default.musicOpen,this.updateDisplay()},e.prototype.onClickSound=function(){n.default.soundOpen=!n.default.soundOpen,this.updateDisplay()},e.prototype.onClickRestart=function(){a.SceneManager.show("Game",this.currentLevel),c.UIManager.close(this)},e.prototype.onClickBack=function(){c.UIManager.close(this)},__decorate([d(cc.Node)],e.prototype,"music",void 0),__decorate([d(cc.Node)],e.prototype,"sound",void 0),__decorate([d(cc.Node)],e.prototype,"buttons",void 0),__decorate([i],e)}(r.default);o.default=u,cc._RF.pop()},{AudioManager:"AudioManager",EventComponent:"EventComponent",SceneManager:"SceneManager",UIManager:"UIManager"}],Shop:[function(t,e,o){"use strict";cc._RF.push(e,"eb47f0rf59Da45mpFRm6+YM","Shop"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("UIManager"),r=t("Game"),a=t("PlatformSystem"),c=cc._decorator,s=c.ccclass,i=c.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.posNode=null,e.comp=null,e}return __extends(e,t),e.prototype.start=function(){},e.prototype.onenter=function(t){this.comp=t},e.prototype.onClickPlay=function(){a.default.platform.showRewardVideo(function(t){if(t){if(this.comp&&this.comp instanceof r.default)this.comp.flyGoldAtPos(this.posNode.getPosition(),1e4);else{var e=this.posNode.getPosition();this.comp.videoReward(e)}this.onClickClose()}}.bind(this))},e.prototype.onClickClose=function(){n.UIManager.close(this)},__decorate([i(cc.Node)],e.prototype,"posNode",void 0),__decorate([s],e)}(t("EventComponent").default);o.default=d,cc._RF.pop()},{EventComponent:"EventComponent",Game:"Game",PlatformSystem:"PlatformSystem",UIManager:"UIManager"}],StarManager:[function(t,e,o){"use strict";cc._RF.push(e,"7658dO1CYpI97CcJ/kJaOQh","StarManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("Star"),r=cc._decorator,a=r.ccclass,c=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.star0=null,e.progress=null,e.stars=[],e.gold=0,e}return __extends(e,t),e.prototype.start=function(){this.stars[0]=this.star0.getComponent(n.default);var t=cc.instantiate(this.star0);t.parent=this.node,this.stars[1]=t.getComponent(n.default),(t=cc.instantiate(this.star0)).parent=this.node,this.stars[2]=t.getComponent(n.default),this.progress.progress=0,this.gold=0},e.prototype.setup=function(t){this.goals=t;for(var e=this.goals[this.goals.length-1],o=-this.node.width/2,n=0;n<this.goals.length;n++)this.stars[n].node.x=o+this.node.width*(this.goals[n]/e);this.progress.progress=0,this.gold=0},e.prototype.addGold=function(t){var e=this.gold;this.gold+=t,this.progress.progress=Math.min(this.gold/this.goals[this.goals.length-1],1);for(var o=0;o<this.goals.length;o++)e+t>this.goals[o]&&this.stars[o].light()},e.prototype.getStar=function(){for(var t=this.goals.length-1;t>=0;t--)if(this.gold>=this.goals[t])return t+1;return 0},__decorate([c(cc.Node)],e.prototype,"star0",void 0),__decorate([c(cc.ProgressBar)],e.prototype,"progress",void 0),__decorate([a],e)}(cc.Component);o.default=s,cc._RF.pop()},{Star:"Star"}],Star:[function(t,e,o){"use strict";cc._RF.push(e,"8086dcrA9xNqZ8ArPCUfhVm","Star"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass,a=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spNormal=null,e.spGray=null,e}return __extends(e,t),e.prototype.start=function(){},e.prototype.light=function(){this.spNormal.node.active=!0,this.spGray.node.active=!1},__decorate([a(cc.Sprite)],e.prototype,"spNormal",void 0),__decorate([a(cc.Sprite)],e.prototype,"spGray",void 0),__decorate([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],Storge:[function(t,e,o){"use strict";cc._RF.push(e,"1513dHWZDZGmJl4Xyl9cXYW","Storge"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.get=function(t){var e=cc.sys.localStorage.getItem(t.key);return e?t.parse(e):t.def},t.set=function(t,e){cc.sys.localStorage.setItem(t.key,e)},t}(),r=function(){function t(t,e){this.key=t,this.def=e}return t.prototype.parse=function(t){return parseInt(t)},t.prototype.inc=function(t){this.set(this.get()+t)},t.prototype.get=function(){return n.get(this)},t.prototype.set=function(t){n.set(this,t)},t}(),a=function(){function t(t,e){this.key=t,this.def=e}return t.prototype.parse=function(t){return t},t.prototype.get=function(){return n.get(this)},t.prototype.set=function(t){n.set(this,t)},t}(),c=function(){function t(t,e){this.key=t,this.def=e}return t.prototype.parse=function(t){return"true"==t||"1"==t},t.prototype.get=function(){return n.get(this)},t.prototype.set=function(t){n.set(this,t)},t}(),s=function(){function t(){}return t.LEVEL=new r("LEVEL",1),t.GOLD=new r("GOLD",15e3),t.STAR=new r("STAR",0),t.THEME=new a("THEME","001"),t.RewardTime=new a("RewardTime","0"),t.MUSIC=new c("MUSIC",!0),t.SOUND=new c("SOUND",!0),t}();o.default=s,cc._RF.pop()},{}],StreakBonus:[function(t,e,o){"use strict";var n;cc._RF.push(e,"8ae62FOWjdPmaqDNKSM7mym","StreakBonus"),Object.defineProperty(o,"__esModule",{value:!0}),o.BonusType=void 0;var r,a=t("Util"),c=t("Card"),s=cc._decorator,i=s.ccclass,d=s.property;(r=n=o.BonusType||(o.BonusType={}))[r.Gold=0]="Gold",r[r.Card=1]="Card",r[r.Joker=2]="Joker";var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dot=null,e.bonus=null,e.tAddCards=null,e.tJoker=null,e.tGold=null,e.allDots=[],e.arrayIndex=0,e.countArray=[],e.goldBonus=0,e}return __extends(e,t),e.prototype.start=function(){this.allDots.push(this.dot);for(var t=0;t<10;t++){var e=cc.instantiate(this.dot);e.parent=this.dot.parent,e.active=!1,this.allDots.push(e)}},e.prototype.setup=function(t){this.arrayIndex=0,this.countArray=t.settings.comboBonus,this.goldBonus=t.settings.comboCoinReward,this.nextBonus()},e.prototype.nextBonus=function(){this.continueCount=0,this.currentCount=this.countArray[this.arrayIndex];for(var t=0;t<this.allDots.length;t++)this.allDots[t].color=cc.Color.WHITE,this.allDots[t].active=t<this.currentCount;this.arrayIndex++,this.arrayIndex==this.countArray.length&&(this.arrayIndex=0),this.currentType=a.default.randomNext(n.Gold,n.Joker),this.setBonusType(this.currentType)},e.prototype.setBonusType=function(t){this.tAddCards.active=t==n.Card,this.tJoker.active=t==n.Joker,this.tGold.active=t==n.Gold},e.prototype.push=function(t,e){this.node.active&&(c.default.isBlack(e)?this.allDots[this.continueCount].color=cc.Color.BLACK:this.allDots[this.continueCount].color=cc.Color.RED,this.continueCount++,this.continueCount==this.currentCount&&(this.sendReward(),this.nextBonus()))},e.prototype.pop=function(){this.node.active&&(this.continueCount--,this.allDots[this.continueCount].color=cc.Color.WHITE)},e.prototype.cancel=function(){this.continueCount=0;for(var t=0;t<this.currentCount;t++)this.allDots[t].color=cc.Color.WHITE,this.allDots[t].active=!0},e.prototype.sendReward=function(){this.rewardFunc()},e.prototype.test=function(){},__decorate([d(cc.Node)],e.prototype,"dot",void 0),__decorate([d(cc.Node)],e.prototype,"bonus",void 0),__decorate([d(cc.Node)],e.prototype,"tAddCards",void 0),__decorate([d(cc.Node)],e.prototype,"tJoker",void 0),__decorate([d(cc.Node)],e.prototype,"tGold",void 0),__decorate([i],e)}(cc.Component);o.default=u,cc._RF.pop()},{Card:"Card",Util:"Util"}],Test:[function(t,e,o){"use strict";cc._RF.push(e,"daa5b391jNNLal9QlNgGLUp","Test"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass,a=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprite=null,e}return __extends(e,t),e.prototype.start=function(){},e.prototype.onClick=function(){console.log("123"),this.sprite.node.getComponent(cc.Animation).play()},e.Hello=function(){Editor.log("123")},__decorate([a(cc.Sprite)],e.prototype,"sprite",void 0),__decorate([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],ThemeItem:[function(t,e,o){"use strict";cc._RF.push(e,"4a9458gUgNBF77UxWe/GOfE","ThemeItem"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass,a=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lockParent=null,e.starLabel=null,e}return __extends(e,t),e.prototype.start=function(){},__decorate([a(cc.Node)],e.prototype,"lockParent",void 0),__decorate([a(cc.Label)],e.prototype,"starLabel",void 0),__decorate([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],ThemeSelector:[function(t,e,o){"use strict";cc._RF.push(e,"7a439u5DPJFnoTbkN+xpSTp","ThemeSelector"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("Storge"),r=cc._decorator,a=r.ccclass,c=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bg=null,e}var o;return __extends(e,t),o=e,e.prototype.start=function(){o.instance=this,this.reload()},e.prototype.reload=function(){var t=n.default.THEME.get();t!=this.theme&&(this.theme=t,this.loadTheme())},e.prototype.changeTheme=function(t){this.theme=t,this.loadTheme()},e.prototype.setTheme=function(t){this.theme=t,n.default.THEME.set(t),this.loadTheme()},e.prototype.loadTheme=function(){var t=this;cc.resources.load("theme/"+this.theme+"/bg",cc.SpriteFrame,function(e,o){var n=t.node.getContentSize(),r=cc.instantiate(t.bg.node);r.opacity=0,r.runAction(cc.fadeIn(.5));var a=r.getComponent(cc.Sprite);a.spriteFrame=o,r.setContentSize(n),r.parent=t.bg.node.parent;var c=t.bg;t.bg=a,c.node.runAction(cc.sequence([cc.fadeOut(.5),cc.destroySelf()])),t.tryLoadBGM()})},e.prototype.tryLoadBGM=function(){},e.instance=null,__decorate([c(cc.Sprite)],e.prototype,"bg",void 0),o=__decorate([a],e)}(cc.Component);o.default=s,cc._RF.pop()},{Storge:"Storge"}],Theme:[function(t,e,o){"use strict";cc._RF.push(e,"33ab9BDiHVF5YzQZstpZp++","Theme"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("SceneManager"),r=t("ThemeItem"),a=t("ThemeSelector"),c=t("Storge"),s=t("AudioManager"),i=cc._decorator,d=i.ccclass,u=i.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.temp=null,e.content=null,e.starLabel=null,e}return __extends(e,t),e.prototype.start=function(){var t=this;cc.resources.load("world",cc.JsonAsset,function(e,o){t.setup(o.json)})},e.prototype.setup=function(t){var e=c.default.STAR.get();this.starLabel.string=""+e;for(var o=function(o){var a,c=t[o],s=cc.instantiate(n.temp);s.active=!0,a=c.ID<10?"00"+c.ID:"0"+c.ID,s.name=a,s.needStar=c.StargateStar;var i="theme/"+a+"/bg_preview";cc.resources.load(i,cc.SpriteFrame,function(t,e){s.getChildByName("bg").getComponent(cc.Sprite).spriteFrame=e});var d=s.getComponent(r.default);e>=c.StargateStar?d.lockParent.active=!1:d.starLabel.string=c.StargateStar,s.parent=n.content},n=this,a=0;a<t.length;a++)o(a)},e.prototype.onClickBack=function(){n.SceneManager.show("Menu"),a.default.instance.reload()},e.prototype.onClickTheme=function(t){var e=t.target;e.getComponent(r.default),s.default.playSound("sound/theme_switch"),e.needStar>c.default.STAR.get()?a.default.instance.changeTheme(t.target.name):a.default.instance.setTheme(t.target.name)},__decorate([u(cc.Node)],e.prototype,"temp",void 0),__decorate([u(cc.Node)],e.prototype,"content",void 0),__decorate([u(cc.Label)],e.prototype,"starLabel",void 0),__decorate([d],e)}(cc.Component);o.default=l,cc._RF.pop()},{AudioManager:"AudioManager",SceneManager:"SceneManager",Storge:"Storge",ThemeItem:"ThemeItem",ThemeSelector:"ThemeSelector"}],UIManager:[function(t,e,o){"use strict";cc._RF.push(e,"25d6c5wcJ5G+YH/L1gn6QaW","UIManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.UIManager=void 0;var n=t("PrefabCache"),r=cc._decorator,a=r.ccclass,c=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.uiParent=null,e.mask=null,e.stack=[],e}var o;return __extends(e,t),o=e,e.show=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];(e=o.instance).showUI.apply(e,__spreadArrays([t],n))},e.close=function(t){o.instance.closeUI(t)},e.prototype.onLoad=function(){o.instance=this,this.mask.parent=this.uiParent,this.mask.active=!1},e.prototype.showUI=function(t){for(var e=this,o=[],r=1;r<arguments.length;r++)o[r-1]=arguments[r];if(t){cc.log("UI\uff1a",t);var a={};if("string"==typeof t||(t=(a=t||{}).name)){var c="prefabs/ui/"+t;n.default.get(c,function(n,r){if(n)return cc.log(n);var c;if(cc.log("show ",t),a.multi||(c=e.bringToTop(t)),!c){c={name:t,node:cc.instantiate(r)};var s=e.stack.push(c);c.node.zIndex=2*s+2,c.node.parent=e.uiParent}c.node.onenter&&c.node.onenter.apply(null,o),e.resetMask()})}}},e.prototype.bringToTop=function(t){for(var e=0;e<this.stack.length;e++){var o=this.stack[e];if(o.name==t)return this.stack.splice(e,1),this.stack.push(o),o}return null},e.prototype.topName=function(){return 0==this.stack.length?"":this.stack[this.stack.length-1].name},e.prototype.topNode=function(){return 0==this.stack.length?"":this.stack[this.stack.length-1].node},e.prototype.pop=function(){this.stack.length>0&&this.closeUI(this.stack[this.stack.length-1].node)},e.prototype.closeUI=function(t){var e="node";t instanceof cc.Component?t=t.node:"string"==typeof t&&(e="name");for(var o=null,n=0;n<this.stack.length;n++){var r=this.stack[n];if(r[e]==t){this.stack.splice(n,1)[0],o=r;break}}o&&(this.collect(o),this.resetMask())},e.prototype.collect=function(t){t.node.parent=null,t.node.destroy()},e.prototype.clear=function(){var t=this;this.stack.forEach(function(e){return t.collect(e)}),this.stack=[],this.resetMask()},e.prototype.resetMask=function(){var t=this.stack.length;this.mask.active=0!=t,this.mask.zIndex=2*t+1},__decorate([c(cc.Node)],e.prototype,"uiParent",void 0),__decorate([c(cc.Node)],e.prototype,"mask",void 0),o=__decorate([a],e)}(cc.Component);o.UIManager=s,cc._RF.pop()},{PrefabCache:"PrefabCache"}],Util:[function(t,e,o){"use strict";cc._RF.push(e,"251c4Tpwd5F+rD8zUMHFbT7","Util"),Object.defineProperty(o,"__esModule",{value:!0});var n=["disableCombo","undoCost","stars","wildCost","cardsInStack","cost","reward","comboBonus","comboCoinReward","extraCardCost"],r=[{key:"depth",type:"number"},{key:"faceUp",type:"boolean"},{key:"value",type:"number"},{key:"x",type:"number"},{key:"y",type:"number"},{key:"angle",type:"number"}],a=function(){function t(){}return t.randomNext=function(t,e){return Math.floor(Math.random()*(e-t)+t)},t.random=function(e,o){return t.randomNext(e,o+1)},t.bind=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];return function(){t.apply(void 0,e)}},t.removeValue=function(t,e){var o=t.indexOf(e);o>-1&&t.splice(o,1)},t.value2Str=function(t){return-1==t||t>=2&&t<=10?""+t:11==t?"J":12==t?"Q":0==t?"K":1==t?"A":"-1"},t.str2Value=function(t){var e;if("-1"==t||""==t)e=-1;else if("10"==t)e=10;else if("A"==t[0])e=1;else if("J"==t[0])e=11;else if("Q"==t[0])e=12;else{if("K"!=t[0]){var o=t.charCodeAt(0),n="0".charCodeAt(0),r="9".charCodeAt(0);return o>=n&&o<=r?o-n:-1}e=13}return e},t.expand=function(t){if(t instanceof Array){for(var e={settings:{},cards:[]},o=function(o){var n={};t[0][o].forEach(function(t,e){var o=r[e];"boolean"==o.type?n[o.key]=!!t:n[o.key]=t}),e.cards.push(n)},a=0;a<t[0].length;a++)o(a);return t[1].forEach(function(t,o){return e.settings[n[o]]=t}),e}return t},t}();o.default=a,cc._RF.pop()},{}],ts:[function(t,e){"use strict";cc._RF.push(e,"65d47Iq6+hOALa++zwarmaZ","ts"),cc._RF.pop()},{}],wxConfig:[function(t,e,o){"use strict";cc._RF.push(e,"c457ah0hQ9ODJ+YiLHkaOGc","wxConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.WX_CONFIG=void 0,o.WX_CONFIG={AD_ID:{banner:"adunit-cb104e41daab5a94",video:"adunit-37364ac23660b9b2",interstitial:"adunit-920d2d143904ae78",multiGridCustom:"adunit-6865e1c171025acb",sigleGridCustom:"adunit-778342dffe308974"}},cc._RF.pop()},{}]},{},["AudioManager","Card","CardFactory","CardFactoryBase","Creator","Editor","EditorInfo","EditorSave","EventComponent","Finish","Game","Gold","Menu","PlatformDefault","PlatformSystem","PlatformWX","PrefabCache","SceneManager","ScrollLabel","Setting","Shop","Star","StarManager","Storge","StreakBonus","Test","Theme","ThemeItem","ThemeSelector","UIManager","Util","wxConfig","ts"]);